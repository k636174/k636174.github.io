---
layout: post
title: "rpmdbが破損した場合の対処メモ"
published: true
date: 2018-04-03 17:33
comments: true
categories:
- CentOS7
- Linux
- 自宅サーバ
---
## エラー内容

ここ最近放置してた仮想マシンにgitbucket入れたいなと思い、jdk入れようとした所下記のエラーが....

<pre class="theme:shell-default lang:default highlight:0 decode:true" title="エラー">[root@iwami35 ~]#  yum install jdk-1.8.0 jdk-1.8.0-deve
エラー: rpmdb: BDB0113 Thread/process 13531/140625288361792 failed: BDB1507 Thread died in Berkeley DB library
エラー: db5 エラー (-30973) (dbenv-&gt;failchk において): BDB0087 DB_RUNRECOVERY: Fatal error, run database recovery
エラー: Packages インデックスを db5 で開けません -  (-30973)
エラー: /var/lib/rpm にある Package データベースを開けません。
CRITICAL:yum.main:

Error: rpmdb open failed
[root@iwami35 ~]#
</pre>

## 対応方法

下記コマンド実行後、無事にyum upgradeして正常時と同等の動作をしている事を確認。

<pre class="theme:shell-default lang:default highlight:0 decode:true " title="rebuilddb">[root@iwami35 ~]# rpm --rebuilddb
[root@iwami35 ~]#
</pre>

---
※この記事は WordPress に投稿した記事を変換したものです。一部不自然な表示があるかも知れません。ご了承ください。また、記事タイトル先頭の * は WordPress から移行した記事である印です。
